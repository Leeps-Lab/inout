<link
    rel="import"
    href="/static/bower_components/polymer/polymer.html" />

<dom-module id="payout-graph">

    <template>
        <div id="graph"></div>
    </template>

    <script>
        Polymer({
            is: 'payout-graph',
            properties: {
                data: {
                    type: Array,
                }
            },
            ready() {
                console.log("Graph loaded");
                this.async(this._initChart.bind(this), 1);
                console.log(this.data);
                
            },
            _initChart() {
                console.log("initializing graph");
                let series = [{
                    type: 'line',
                    data: this.data
                }];

                this.graph_obj = Highcharts.chart ({
                    chart: {
                        animation: false,
                        renderTo: this.$.graph,
                        width: 500, 
                        height: 500
                    },
                    title: { 
                        text: "Your data"
                    },
                    xAxis: {
                        min: 0,
                        max: 60, // Period length
                        title: {
                            text: 'Period'
                        },
                    },
                    yAxis: {
                        min: 0,
                        max: 300, // Period length
                        title: {
                            text: 'Period'
                        },
                    },
                    credits: {
                        enabled: false
                    },
                    tooltip: {
                        enabled: false
                    },

                    series: series

                });

                console.log(this.graph_obj.series);
                
            },
            addData(dataArr) {
                this.graph_obj.series.data.push(dataArr);
                console.log("Data pushed");
            } 
        });
    </script>
</dom-module>