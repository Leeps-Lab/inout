<link
    rel="import"
    href="/static/bower_components/polymer/polymer.html" />

<dom-module id="payout-graph">

    <template>
        <div id="graph"></div>
    </template>

    <script>
        Polymer({
            is: 'payout-graph',
            properties: {
                data: {
                    type: Array,
                    value: [],
                },
                gameConstant:{
                    type: Number,
                },
            },
            ready() {
                console.log("Graph loaded");
                this.async(this._initChart.bind(this), 1);
                console.log(this.data);
                
            },
            _initChart() {
                console.log("initializing graph");
                let series = [{
                    type: 'line',
                    data: this.data
                }];

                this.graph_obj = Highcharts.chart ({
                    chart: {
                        animation: false,
                        renderTo: this.$.graph,
                        width: 500, 
                        height: 500
                    },
                    title: { 
                        text: "Your data",
                        style: {
                            align: "left",
                            fontSize: 20,
                        }

                    },
                    xAxis: {
                        min: 0,
                        max: 80, // Period length
                        title: {
                            text: 'Period'
                        },
                    },
                    yAxis: {
                        min: 0,
                        max: 300, // Period length
                        title: {
                            text: 'Period'
                        },

                        plotLines: [{
                            color: "#000000",
                            width: 1,
                            value: this.gameConstant,
                            label: {
                                text: (this.gameConstant + " - Q payout"),
                                align: "right",
                                style: {
                                    fontSize: 10,
                                }
                            }
                        }]
                    },
                    credits: {
                        enabled: false
                    },
                    tooltip: {
                        enabled: false
                    },


                    series: series

                });

                
            },
            addData(dataArr) {
                this.data.push(dataArr);
                this.graph_obj.series[0].setData(this.data);
                //console.log(this.graph_obj.series[0].data);
                
            } 
        });
    </script>
</dom-module>